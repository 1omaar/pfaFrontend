<app-nav></app-nav>

<div class="container mt-5">
  <h2 class="text-center mb-4">Product List</h2>

  <button type="button" class="btn btn-primary mb-4" data-bs-toggle="modal" data-bs-target="#addProductModal">
    Add Product
  </button>

  <div class="modal fade" id="addProductModal" tabindex="-1" aria-labelledby="addProductModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addProductModalLabel">Add Product</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form #addProductForm="ngForm" (ngSubmit)="addProduct(addProductForm)">
            <div class="mb-3">
              <label for="productName" class="form-label">Name</label>
              <input #productName="ngModel" ngModel name="productName" type="text" class="form-control" id="productName" required>
              <div *ngIf="productName.invalid && productName.touched" class="text-danger">
                Product name is required.
              </div>
            </div>
            <div class="mb-3">
              <label for="productDescription" class="form-label">Description</label>
              <input #productDescription="ngModel" ngModel name="productDescription" type="text" class="form-control" id="productDescription" required>
              <div *ngIf="productDescription.invalid && productDescription.touched" class="text-danger">
                Product description is required.
              </div>
            </div>
            <div class="mb-3">
              <label for="productPrice" class="form-label">Price</label>
              <input #productPrice="ngModel" ngModel name="productPrice" type="number" class="form-control" id="productPrice" required>
              <div *ngIf="productPrice.invalid && productPrice.touched" class="text-danger">
                Product price is required.
              </div>
            </div>
            <div class="mb-3">
              <label for="productQuantite" class="form-label">Quantit√©</label>
              <input #productQuantite="ngModel" ngModel name="productQuantite" type="number" class="form-control" id="productQuantite" required>
              <div *ngIf="productQuantite.invalid && productQuantite.touched" class="text-danger">
                Product quantity is required.
              </div>
            </div>
            <button type="submit" data-bs-dismiss="modal" class="btn btn-primary" [disabled]="addProductForm.invalid">Save changes</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <table class="table table-striped">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Description</th>
        <th>Price</th>
        <th>Quantite</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let product of products">
        <td>{{ product.id }}</td>
        <td>{{ product.nom }}</td>
        <td>{{ product.description }}</td>
        <td>{{ product.prix | currency }}</td>
        <td>{{ product.quantite }}</td>
        <td>
          <button [routerLink]="['/update', product.id]" class="btn btn-warning btn-sm">Update</button>
          <button (click)="deleteProduct(product.id)" class="btn btn-danger btn-sm">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
